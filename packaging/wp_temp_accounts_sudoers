# WordPress Temporary Accounts - Sudoers Configuration
# This allows cPanel web scripts to run WP-CLI commands as any cPanel user
#
# Install to: /etc/sudoers.d/wp_temp_accounts
# Permissions: 0440 (r--r-----)
#
# Security: Only allows specific WP-CLI commands, no shell access

# Allow nobody (web server) and cpanel users to run WP-CLI as any user
nobody ALL=(ALL) NOPASSWD: /usr/local/bin/wp user *, /usr/bin/wp user *
cpanel ALL=(ALL) NOPASSWD: /usr/local/bin/wp user *, /usr/bin/wp user *

# Allow root (for cleanup cron)
root ALL=(ALL) NOPASSWD: /usr/local/bin/wp user *, /usr/bin/wp user *

# Alternative: More restrictive - only specific WP-CLI user commands
# Uncomment these and comment out the above lines for tighter security
# nobody ALL=(ALL) NOPASSWD: /usr/local/bin/wp user create *, /usr/local/bin/wp user delete *, /usr/local/bin/wp user list *, /usr/local/bin/wp user meta *
# cpanel ALL=(ALL) NOPASSWD: /usr/local/bin/wp user create *, /usr/local/bin/wp user delete *, /usr/local/bin/wp user list *, /usr/local/bin/wp user meta *
# root ALL=(ALL) NOPASSWD: /usr/local/bin/wp user create *, /usr/local/bin/wp user delete *, /usr/local/bin/wp user list *, /usr/local/bin/wp user meta *
